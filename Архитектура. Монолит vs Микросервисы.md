> Монолитная архитектура против микросервисной - что же лучше для бизнеса?

## Монолитная архитектура против микросервисной — что же лучше для бизнеса?

Важно сразу сказать: **ни монолит, ни микросервисы не являются серебряной пулей**. У каждого подхода есть сильные и слабые стороны.

Например, микросервисы почти всегда обходятся дороже: если у вас 10 сервисов, вам потребуется ≈10× инфраструктуры, логирования, мониторинга и оперативных затрат. Монолит же может работать вообще на одной машине — особенно в начале.

Разберёмся почему.

---

# Модульный монолит

**Модульный монолит — это монолитное приложение, внутри которого чётко выделены независимые модули.**

Простой пример — Django. Фреймворк из коробки предлагает структурировать проект через `startapp`, разделяя код по доменным областям. Однако важно понимать:

**Django-app — это не сервис.**  
У всех модулей:

- общая база данных,
- общая ORM,
- общий процесс выполнения,
- общие middleware,
- общий деплой.

То есть модули логически разделены, но физически — это один сервис.

В этом и суть модульного монолита: **чёткие доменные границы внутри одного приложения**. Это даёт чистоту кода, простоту разработки и очень низкую инфраструктурную стоимость.

---

# Распределённый монолит (антипаттерн)

Распределённый монолит — архитектурный антипаттерн, возникающий, когда систему «разрезали» на сервисы, разнесли по сетям…

…но оставили:

- общую базу данных,
- тесные синхронные связи,
- хрупкие зависимости,
- единые модели данных.

Типичное описание:  
**“вроде микросервисы, но зависимость такая же плотная, как в монолите — только по сети”.**

Единственное, что отличает эту систему от модульного монолита — то, что части запущены на разных машинах. Но микросервисной независимостью там и не пахнет.

---

# Микросервисы

Микросервис — это **полностью изолированный компонент**, который можно:

- разворачивать независимо,
- обновлять независимо,
- масштабировать независимо,
- менять стек разработки,
- менять язык, БД, инфраструктуру.

Он не обязан знать, что происходит в других частях системы. Ему нужен только контракт взаимодействия — API или событие.

## Плюсы микросервисов:

- независимое развертывание,
- независимая разработка,
- разные стеки для разных задач,
- независимое масштабирование,
- хорошая изоляция ошибок,
- высокая гибкость команд.

Но за это приходится платить — причём дорого.

---

# Чем мы платим за микросервисы?

Представим, что у нас есть три микросервиса: **users**, **metrics**, **portfolio**.  
У каждого — свой стек, своя база, свои фреймворки.

И сразу появляются вопросы:

- Как им общаться?  
    HTTP? gRPC? Kafka? RabbitMQ? EventBus?
    
- Как делить транзакции?  
    В монолите — одна транзакция ORM. В микросервисах — **саги** и **eventual consistency**.
    
- Как делать мониторинг всей цепочки вызовов?  
    Нужны distributed tracing, логирование, correlation-id.
    
- Что делать, если один сервис упал?  
    Нужны retry, dead letter queue, circuit breaker.
    
- Как защищаться от каскадных сбоев?  
    Тоже микросервисная классика.


И это только backend-слой.  
Появляются вопросы DevOps:

- orchestration (Kubernetes),
- сервис-меши (Istio),
- secret management,
- централизованный логинг,
- healthchecks,
- CI/CD пайплайны для каждого сервиса,
- versioning API,
- контрактные тесты.

То есть микросервисы — это **сложность, умноженная на количество сервисов**.

Монолиту этого всего… просто не нужно.

---

# Так почему же не выбирать микросервисы всегда?

Потому что выбор зависит от контекста:

- **Большая команда?**  
    Да, микросервисы могут снизить конфликты и разгрузить команды.
    
- **Маленькая команда или стартап?**  
    Монолит дешевле, быстрее в разработке, проще поддерживать.
    
- **Большой бюджет и высокие требования к масштабируемости?**  
    Микросервисы дадут гибкость.
    
- **Ограниченный бюджет и необходимость быстро выпускать фичи?**  
    Монолит намного выгоднее.

Важно понимать: и монолит, и микросервисы могут превратиться в грязь.  
Чистота зависит от дисциплины, а не от архитектуры.

---

>[!summary] Финальный вывод
Выбирайте микросервисы **только тогда, когда у вас есть достаточный размер команды, DevOps-культура и архитектурная дисциплина**.
В остальных случаях **модульный монолит — лучший старт**, и при грамотном дизайне его позднее можно безболезненно разделить на микросервисы.


[[IT]] [[Родительские классы/IT/Архитектура/Архитектура|Архитектура]]