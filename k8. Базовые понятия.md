## 🧭 Что такое Kubernetes

**Kubernetes (или K8s)** — это система оркестрации контейнеров.  
Её задача — автоматически **запускать, масштабировать и восстанавливать** контейнеры (чаще всего Docker), чтобы приложение работало стабильно, даже если что-то падает.

---

## 🧱 Основные понятия

### 🟩 Кластер (Cluster)

Кластер — это вся «экосистема» Kubernetes.  
Он объединяет несколько **нод (узлов)** и управляется центральной частью — **Control Plane**.

📦 В кластере может быть:

- 1 мастер-нода (или несколько — для отказоустойчивости)
    
- Несколько рабочих нод (worker nodes), на которых и крутятся контейнеры
    

---

### 🖥️ Нода (Node)

Нода — это **реальный или виртуальный сервер**, где запускаются контейнеры.  
На каждой ноде работает:

- `kubelet` — агент, который общается с Control Plane
    
- `container runtime` — например, Docker или containerd (чтобы реально запускать контейнеры)
    
- `kube-proxy` — управляет сетью между подами
    

🧩 Пример:  
Если кластер — это целый город, то нода — это один дом, где живут жители (поды).

---

### 🧊 Под (Pod)

**Под** — это **минимальная единица запуска в Kubernetes**.  
Под — это как обёртка над контейнерами.  
В одном поде может быть:

- 1 контейнер (чаще всего)
    
- Несколько контейнеров, которые **работают вместе** и делят одну сеть и файловую систему
    

📌 Если контейнер — это приложение, то под — это «контейнер для контейнера».

---

### 🚀 Deployment

**Deployment** — это контроллер, который управляет подами.  
Он говорит Kubernetes:

> «Хочу 3 пода вот такого приложения — следи, чтобы они всегда были живы.»

Kubernetes сам:

- создаёт нужное количество подов,
    
- перезапускает упавшие,
    
- делает **rolling updates** (плавные обновления без простоя),
    
- откатывает изменения, если что-то пошло не так.
    

📦 Пример:  
Deployment = рецепт, по которому Kubernetes готовит нужное количество подов.

---

### 🕸️ Service

**Service** — это способ **дать доступ к подам**.  
Поды живут недолго и могут пересоздаваться с новыми IP — Service создаёт **постоянную точку доступа**(виртуальный IP или DNS).

Типы сервисов:

- `ClusterIP` — доступ только внутри кластера
    
- `NodePort` — доступ извне через порт ноды
    
- `LoadBalancer` — балансировка для внешнего трафика
    

📌 Пример:  
Service — это как «диспетчер», который направляет пользователей к нужным подам, неважно где они сейчас живут.

---

### 🗃️ Namespace

**Namespace** — это способ логически разделить ресурсы внутри кластера.  
Например, у тебя может быть:

- `dev` — для разработки
    
- `prod` — для продакшена
    
- `monitoring` — для Prometheus и Grafana
    

---

### ⚙️ ConfigMap и Secret

- **ConfigMap** — хранит обычные конфиги (например, `DATABASE_URL`)
    
- **Secret** — хранит чувствительные данные (пароли, токены)
    

Они подключаются в поды как переменные окружения или файлы.

---

### 📦 Volume

**Volume** — это способ хранить данные, чтобы они **не исчезали при перезапуске пода**.  
Поды эфемерны, а Volume может быть постоянным (Persistent Volume).

---

## 📚 Иерархия (представь как матрёшку)

```
Cluster
 ├── Node
 │    ├── Pod
 │    │    ├── Container
 │    │    └── Volume / ConfigMap / Secret
 │    └── Kubelet / Proxy
 └── Control Plane (API Server, Scheduler, Controller, etcd)

```

---

## 💬 Пример на пальцах

> У тебя есть веб-приложение.
> 
> — **Pod** = сам контейнер с приложением  
> — **Deployment** = говорит, что нужно 3 таких пода  
> — **Service** = балансирует трафик между ними  
> — **ConfigMap/Secret** = хранят настройки и пароли  
> — **Cluster** = вся эта система целиком  
> — **Node** = физическая машина, где всё это крутится

[[IT]] [[k8]]