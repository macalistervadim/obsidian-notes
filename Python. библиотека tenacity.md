
**Tenacity** — это мощная библиотека для реализации логики "повтори ещё раз", если операция завершилась с ошибкой.

Используется для:
- повторных попыток при временных ошибках (сеть, API, БД)
- работы с нестабильными внешними сервисами
- упрощения шаблонного `try/except` + `sleep` кода

---

## Простой пример

```python
from tenacity import retry, stop_after_attempt, wait_fixed

@retry(stop=stop_after_attempt(3), wait=wait_fixed(2))
def unstable_func():
    print("Попытка...")
    raise ValueError("всё ещё ломается")
```
→ Попробует вызвать `unstable_func()` **3 раза**, между попытками подождёт **2 секунды**, а потом выбросит исключение.


## Частые параметры

| Аргумент                                  | Описание                                    |
| ----------------------------------------- | ------------------------------------------- |
| `stop_after_attempt(n)`                   | Остановиться после `n` попыток              |
| `wait_fixed(n)`                           | Ждать `n` секунд между попытками            |
| `wait_exponential()`                      | Экспоненциальная задержка                   |
| `retry_if_exception_type(...)`            | Повторять только на определённые исключения |
| `before`, `after`, `retry_error_callback` | Хуки для логов, трекинга и кастомной логики |
|                                           |                                             |

## Примечания

- Можно использовать как `@retry`-декоратор, генератор (`for attempt in Retrying(...)`) или контекстный менеджер
    
- Полезен в системах, где важна **устойчивость к временным сбоям**
    
- Отлично сочетается с `async def` (есть `@async_retry`)